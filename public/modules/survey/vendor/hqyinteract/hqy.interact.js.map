{"version":3,"sources":["webpack:///webpack/bootstrap bdd8fd27327d4aca6ff0","webpack:///./hqy.interact.main.js","webpack:///./interaction/draggable.js","webpack:///./$.js","webpack:///./utils/utils.js","webpack:///./interaction/draggable-class.js","webpack:///./interaction/events.js","webpack:///./utils/widget.js","webpack:///./interaction/droppable.js","webpack:///./interaction/droppable-class.js","webpack:///./interaction/resizable.js","webpack:///./interaction/resizable-class.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA,wB;;;;;;ACFA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAgC;AAChC,wCAAuC;AACvC,mCAAkC;AAClC;AACA;;;;;;;AC9CA,gD;;;;;;ACAA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;AC9BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,KAAI;AACJ;AACA;AACA,MAAK;;AAEL;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;;AAGH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,KAAI;;AAEJ;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAAE;AACF;;;AAGA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;;;;;;;AC1cA;;AAEA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA,gBAAe;;AAEf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;;;;;;;;ACpCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,2BAA0B;AAC1B,GAAE;;AAEF;AACA,uBAAsB;;AAEtB;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAM;AACN,IAAG;AACH;AACA;AACA;;AAEA,8CAA6C,MAAM;AACnD;AACA;AACA;AACA;AACA;;AAEA,uDAAsD,MAAM;AAC5D;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAI;AACJ;AACA;;AAEA;AACA;AACA,OAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAI;AACJ;;AAEA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAE;;;AAGF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,IAAI,KAAK;AAClC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB,IAAI,IAAI;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;;;AAGA;AACA,gCAA+B,QAAQ;AACvC;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;;;AClQA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAuC;AACvC,uCAAsC;AACtC,wCAAuC;AACvC;AACA;;;;;;;ACxCA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA,gBAAe,oBAAoB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAE;AACF;;;;;;;AC7CA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,wBAAuB,2CAA2C;;AAElE;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAE;AACF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,+BAA8B;AAC9B,0BAAyB;AACzB;AACA;;;;;;;AC3CA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA,eAAc,kBAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;AACH,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,GAAE;;AAEF;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA","file":"hqy.interact.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bdd8fd27327d4aca6ff0\n **/","require('interaction/draggable');\r\nrequire('interaction/droppable');\r\nrequire('interaction/resizable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./hqy.interact.main.js\n ** module id = 0\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tUtils = require('../utils/utils'),\r\n\tDraggable = require('./draggable-class');\r\n\r\n$.fn.hqyDraggable = function (options) {\r\n\tvar args = arguments;\r\n\r\n\treturn this.each(function () {\r\n\t\tvar $ele = $(this);\r\n\t\tvar instance = $ele.data('hqyDraggable');\r\n\r\n\t\tif (Utils.isString(options)){\r\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = $.extend({}, $.fn.hqyDraggable.defaults, options || {});\r\n\r\n\t\tif (instance){\r\n\t\t\tinstance.destroy();\r\n\t\t}\r\n\r\n\t\tinstance = new $.fn.hqyDraggable.clz();\r\n\t\tinstance.init(this, options);\r\n\r\n\t\t$ele.data('hqyDraggable', instance);\r\n\t});\r\n};\r\n\r\n$.fn.hqyDraggable.clz = Draggable;\r\n\r\n$.fn.hqyDraggable.defaults = {\r\n\tproxy:null,\r\n\trevert:false,\r\n\trevertDuration: 0,\r\n\tdeltaX:null,\r\n\tdeltaY:null,\r\n\thandle: null,\r\n\tdisabled: false,\r\n\taxis:null,\t// x or y\r\n\tcursor: 'move',\r\n\r\n\tonBeforeDrag: function(event){},\r\n\tonStartDrag: function(event, target){},\r\n\tonDrag: function(event, target){},\r\n\tonStopDrag: function(event, target){}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/draggable.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = window.jQuery || window.Zepto;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./$.js\n ** module id = 2\n ** module chunks = 0\n **/","var $ = require('../$');\r\n\r\nvar toString = exports.toString = Object.prototype.toString;\r\n\r\nexports.isUndefined = function(obj) {\r\n\treturn obj === void 0;\r\n};\r\n\r\nexports.isNull = function(obj) {\r\n\treturn obj === null;\r\n};\r\n\r\n$.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function (index, name) {\r\n\texports['is' + name] = function (obj) {\r\n\t\treturn toString.call(obj) === '[object ' + name + ']';\r\n\t};\r\n});\r\n\r\nfunction S4() {\r\n\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\r\n}\r\n\r\nexports.uuid = function (prefix) {\r\n\tvar id = '' + S4() + S4() + S4() + S4() + S4() + S4() + S4() + S4();\r\n\treturn prefix ? prefix + id : id;\r\n};\r\n\r\nexports.ucfirst = function (str) {\r\n\tif (!str) return str;\r\n\treturn str.charAt(0).toUpperCase() + str.substring(1);\r\n};\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./utils/utils.js\n ** module id = 3\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tEvents = require('./events'),\r\n\tUtils = require('../utils/utils'),\r\n\tWidget = require('../utils/widget');\r\n\r\nfunction Draggable () {}\r\n\r\n$.extend(Draggable.prototype, Widget, {\r\n\tsetup: function () {\r\n\t\tthis.bindEvents();\r\n\t},\r\n\r\n\tbindEvents: function () {\r\n\t\tvar handle = this.get('handle') || this.el;\r\n\r\n\t\tif (isString(handle)) {\r\n\t\t\thandle = this.$(handle);\r\n\t\t}\r\n\r\n\t\tthis.delegateEvents(handle, Events.start, this.doDragBefore);\r\n\r\n\t\tthis.delegateEvents('click', function (event) {\r\n\t\t\tif (!this._allowClick) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tthis._allowClick = true;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tdrag: function (event) {\r\n\t\tvar dragData = event.data;\r\n\t\tvar proxy = this._proxy;\r\n\t\tvar axis = this.get('axis');\r\n\t\tvar pointer = Events.pointer(event);\r\n\t\tvar pageX = pointer.x;\r\n\t\tvar pageY = pointer.y;\r\n\r\n\t\tvar left = dragData.startLeft + pageX - dragData.startX;\r\n\t\tvar top = dragData.startTop + pageY - dragData.startY;\r\n\r\n\t\tvar parent;\r\n\r\n\t\t// 只有在 proxy 的情况下才计算 deltaX 和 deltaY\r\n\t\tif (proxy) {\r\n\t\t\tvar deltaX = this.get('deltaX');\r\n\t\t\tvar deltaY = this.get('deltaY');\r\n\r\n\t\t\tparent = proxy.parent();\r\n\r\n\t\t\tif (parent[0] == document.body){\r\n\t\t\t\tif (isValid(deltaX)) {\r\n\t\t\t\t\tleft = pageX + deltaX;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleft = pageX - dragData.offsetWidth;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isValid(deltaY)){\r\n\t\t\t\t\ttop = pageY + deltaY;\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttop = pageY - dragData.offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (isValid(deltaX)) {\r\n\t\t\t\t\tleft += dragData.offsetWidth + deltaX;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (isValid(deltaY)){\r\n\t\t\t\t\ttop += dragData.offsetHeight + deltaY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tparent = this.el.parent();\r\n\t\t}\r\n\r\n\t\tif (parent[0] != document.body) {\r\n\t\t\tleft += parent.scrollLeft();\r\n\t\t\ttop += parent.scrollTop();\r\n\t\t}\r\n\r\n\r\n\t\tif (axis == 'x') {\r\n\t\t\tdragData.left = left;\r\n\t\t} else if (axis == 'y') {\r\n\t\t\tdragData.top = top;\r\n\t\t} else {\r\n\t\t\tdragData.left = left;\r\n\t\t\tdragData.top = top;\r\n\t\t}\r\n\t},\r\n\r\n\tapplyDrag: function (event) {\r\n\t\t(this._proxy || this.el).css({\r\n\t\t\tleft: event.data.left,\r\n\t\t\ttop: event.data.top\r\n\t\t});\r\n\t},\r\n\r\n\tdoDragBefore: function (event) {\r\n\t\t// 重置点击事件标志位\r\n\t\tthis._allowClick = true;\r\n\r\n\t\t// 不允许拖放\r\n\t\tif (event.which === 3 || this.get('disabled') || !canDrag()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\t// 阻止默认事件\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar position = this.el.position(),\r\n\t\t\toffset = this.el.offset(),\r\n\t\t\tpointer = Events.pointer(event);\r\n\r\n\t\tevent.data = {\r\n\t\t\tstartTime: new Date().getTime(), // 开始时间\r\n\t\t\tstartPosition: this.el.css('position'), // 开始的 position，如 static，relative，方便拖拽结束后还原\r\n\t\t\tstartLeft: position.left,\r\n\t\t\tstartTop: position.top,\r\n\t\t\tleft: position.left,\r\n\t\t\ttop: position.top,\r\n\t\t\tstartX: pointer.x,\r\n\t\t\tstartY: pointer.y,\r\n\t\t\toffsetWidth: (pointer.x - offset.left),\r\n\t\t\toffsetHeight: (pointer.y - offset.top)\r\n\t\t};\r\n\r\n\t\t// 触发回调\r\n\t\tif (this.triggerMethod('onBeforeDrag', event) === false) return;\r\n\r\n\t\tvar that = this,\r\n\t\t\t$doc = $(document),\r\n\t\t\tnamespace = getEventNamespace(this.cid);\r\n\r\n\t\t$doc.on(Events.move + namespace, event.data, function (event) {\r\n\t\t\tif (!isDragging()) {\r\n\t\t\t\tthat.doDragStart(event);\r\n\t\t\t} else {\r\n\t\t\t\tthat.doDragMove(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$doc.on(Events.end + namespace, event.data, function (event) {\r\n\t\t\tthat.doDragEnd(event);\r\n\t\t});\r\n\t},\r\n\r\n\tdoDragStart: function (event) {\r\n\t\tif (!this._isMoving) {\r\n\t\t\t// 阻止默认事件\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tthis._isMoving = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 设置状态\r\n\t\ttoggleDragging(true);\r\n\r\n\t\tvar that = this;\r\n\r\n\t\t// drop 对象\r\n\t\tthis._drops = $.grep(drops(), function (droppable) {\r\n\t\t\t// 排除 draggable 元素也是 droppable 元素\r\n\t\t\tif (that.element === droppable.element) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar accept = droppable.get('accept');\r\n\r\n\t\t\t// 询问每一个 drop 元素是否接受该拖拽对象\r\n\t\t\tif (isFunction(accept)) {\r\n\t\t\t\treturn accept.call(droppable.element, that.element);\r\n\r\n\t\t\t// 如果 accept 是选择器\r\n\t\t\t} else if (accept) {\r\n\t\t\t\treturn $(accept).filter(function(){\r\n\t\t\t\t\treturn this === that.element;\r\n\t\t\t\t}).length > 0;\r\n\r\n\t\t\t// 默认接受该拖拽元素\r\n\t\t\t} else {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t// 清理 proxy（上一次 revert 动画还没有执行完成）\r\n\t\tthis.clearProxy();\r\n\r\n\t\t// 创建 proxy\r\n\t\tvar userProxy = this.get('proxy');\r\n\r\n\t\tif (userProxy === 'clone'){\r\n\t\t\tthis._proxy = this.el.clone().insertAfter(this.el);\r\n\t\t} else if (isFunction(userProxy)) {\r\n\t\t\tthis._proxy = userProxy.call(this.element, this.element);\r\n\t\t}\r\n\r\n\t\tvar target = this._proxy || this.el;\r\n\r\n\t\t// 设置定位\r\n\t\ttarget.css('position', 'absolute');\r\n\r\n\t\t// 设置拖拽指针样式\r\n\t\t$('body').css('cursor', this.get('cursor'));\r\n\r\n\t\t// 触发回调\r\n\t\tthis.triggerMethod('onStartDrag', event, target[0]);\r\n\r\n\t\t// 设置一次位置\r\n\t\tthis.doDragMove(event);\r\n\t},\r\n\r\n\tdoDragMove: function (event) {\r\n\t\tif (!isDragging()) return;\r\n\r\n\t\t// 阻止默认事件\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// 处理拖拽数据\r\n\t\tthis.drag(event);\r\n\r\n\t\t// 应用拖拽数据\r\n\t\tif (this.triggerMethod('onDrag', event, (this._proxy || this.el)[0]) !== false){\r\n\t\t\tthis.applyDrag(event);\r\n\t\t}\r\n\r\n\t\tvar that = this,\r\n\t\t\t$body = $('body'),\r\n\t\t\ttarget = this._proxy || this.el;\r\n\r\n\t\t// 触发 droppable 的事件\r\n\t\tdropsEach(event, this._drops, function (droppable, isContain) {\r\n\t\t\tvar droppableElement = droppable.element,\r\n\t\t\t\tcursor = droppable.get('cursor');\r\n\r\n\t\t\tif (isContain) {\r\n\t\t\t\t// 如果未划入 drop 对象，则触发 _dragenter\r\n\t\t\t\tif (!droppableElement.entered) {\r\n\t\t\t\t\t$(droppableElement).trigger('_dragenter', [event, target[0]]);\r\n\t\t\t\t\tdroppableElement.entered = true;\r\n\t\t\t\t\t// 设置拖拽指针样式\r\n\t\t\t\t\tcursor && $body.css('cursor', cursor);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 同时触发 _dragover\r\n\t\t\t\t$(droppableElement).trigger('_dragover', [event, target[0]]);\r\n\t\t\t} else {\r\n\t\t\t\t// 如果已经划入，再划出，则触发 _dragleave\r\n\t\t\t\tif (droppableElement.entered){\r\n\t\t\t\t\t$(droppableElement).trigger('_dragleave', [event, target[0]]);\r\n\t\t\t\t\tdroppableElement.entered = false;\r\n\t\t\t\t\t// 设置拖拽指针样式\r\n\t\t\t\t\t$body.css('cursor', that.get('cursor'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tdoDragEnd: function (event) {\r\n\t\t// 如果没有 drag 则什么都不做，并且清除执行中间数据\r\n\t\tif (!isDragging()) {\r\n\t\t\tthis.clearProxy();\r\n\t\t\tthis.clearDragging();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 重置一次位置\r\n\t\tthis.doDragMove(event);\r\n\r\n\t\t// 设置点击事件标志位\r\n\t\tthis._allowClick = false;\r\n\r\n\t\tvar that = this,\r\n\t\t\trevert = this.get('revert'),\r\n\t\t\trevertDuration = this.get('revertDuration'),\r\n\t\t\ttarget = this._proxy || this.el;\r\n\r\n\r\n\t\tdropsEach(event, this._drops, function (droppable, isContain) {\r\n\t\t\tif (!isContain) return;\r\n\r\n\t\t\t$(droppable.element).trigger('_drop', [event, target[0]]);\r\n\r\n\t\t\tdroppable.element.entered = false;\r\n\t\t\treturn false;\r\n\t\t});\r\n\r\n\r\n\t\tvar reset = function (clearProxy) {\r\n\t\t\t// 触发 onStopDrag\r\n\t\t\tthat.triggerMethod('onStopDrag', event, target[0]);\r\n\r\n\t\t\tthat.clearDragging();\r\n\r\n\t\t\t// 清除代理\r\n\t\t\tclearProxy && that.clearProxy();\r\n\t\t}\r\n\r\n\t\tvar doProxy = function () {\r\n\t\t\tif (revert) {\r\n\t\t\t\tvar left, top;\r\n\t\t\t\tif (target.parent()[0] == document.body){\r\n\t\t\t\t\tleft = event.data.startX - event.data.offsetWidth;\r\n\t\t\t\t\ttop = event.data.startY - event.data.offsetHeight;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tleft = event.data.startLeft;\r\n\t\t\t\t\ttop = event.data.startTop;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 这里不能清空代理元素，有可能在执行动画\r\n\t\t\t\treset();\r\n\r\n\t\t\t\trevertElement(target, {\r\n\t\t\t\t\tleft: left,\r\n\t\t\t\t\ttop: top\r\n\t\t\t\t}, revertDuration, function () {\r\n\t\t\t\t\t// 清除代理\r\n\t\t\t\t\tthat.clearProxy();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// 触发回调\r\n\t\t\t\treset(true);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar doEl = function () {\r\n\t\t\tif (revert) {\r\n\t\t\t\trevertElement(target, {\r\n\t\t\t\t\tleft: event.data.startLeft,\r\n\t\t\t\t\ttop: event.data.startTop\r\n\t\t\t\t}, revertDuration, function () {\r\n\t\t\t\t\t// 充值为初始 position\r\n\t\t\t\t\ttarget.css('position', event.data.startPosition);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t/* else {\r\n\t\t\t\ttarget.css({\r\n\t\t\t\t\tleft: event.data.startLeft,\r\n\t\t\t\t\ttop: event.data.startTop,\r\n\t\t\t\t\tposition: event.data.startPosition\r\n\t\t\t\t});\r\n\t\t\t}*/\r\n\r\n\t\t\t// 触发回调\r\n\t\t\treset(true);\r\n\t\t}\r\n\r\n\t\tif (this._proxy) {\r\n\t\t\tdoProxy(target);\r\n\t\t} else {\r\n\t\t\tdoEl(target);\r\n\t\t}\r\n\t},\r\n\r\n\tclearProxy: function () {\r\n\t\tif (this._proxy) {\r\n\t\t\tthis._proxy.stop(true).remove();\r\n\t\t\tthis._proxy = null;\r\n\t\t}\r\n\t},\r\n\r\n\tclearDragging: function () {\r\n\t\tthis._drops = null;\r\n\r\n\t\tthis._isMoving = false;\r\n\r\n\t\t$(document).off(getEventNamespace(this.cid));\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\t$('body').css('cursor','');\r\n\t\t},100);\r\n\r\n\t\ttoggleDragging(false);\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\t// 清除拖拽事件产生的临时变量\r\n\t\tthis.clearDragging();\r\n\r\n\t\tWidget.destroy.call(this);\r\n\t}\r\n});\r\n\r\nmodule.exports = Draggable;\r\n\r\n\r\n// helpers\r\n// ----------------\r\n\r\nvar isString = Utils.isString,\r\n\tisFunction = Utils.isFunction,\r\n\tisUndefined = Utils.isUndefined,\r\n\tisNull = Utils.isNull;\r\n\r\nfunction getEventNamespace (cid) {\r\n\treturn '.hqyDraggable' + cid;\r\n}\r\n\r\nfunction canDrag () {\r\n\tif ($.fn.hqyDraggable.isDragging) return false;\r\n\r\n\tif ($.fn.hqyResizable && ($.fn.hqyResizable.isResizing || $.fn.hqyResizable.inHotzone)) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction toggleDragging (state) {\r\n\t$.fn.hqyDraggable.isDragging = state;\r\n}\r\n\r\nfunction isDragging () {\r\n\treturn $.fn.hqyDraggable.isDragging;\r\n}\r\n\r\nfunction drops () {\r\n\treturn ($.fn.hqyDroppable && $.fn.hqyDroppable.instances) || [];\r\n}\r\n\r\nfunction isValid (val) {\r\n\treturn !isUndefined(val) && !isNull(val);\r\n}\r\n\r\nfunction dropsEach (event, drops, cb) {\r\n\tvar pointer = Events.pointer(event);\r\n\r\n\tvar pageX = pointer.x;\r\n\tvar pageY = pointer.y;\r\n\r\n\t$.each(drops, function (index, droppable) {\r\n\t\tif (droppable.get('disabled')) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar p2 = droppable.el.offset();\r\n\r\n\t\tvar isContain = pageX > p2.left &&\r\n\t\t\t\t\t\tpageX < p2.left + droppable.el.outerWidth() &&\r\n\t\t\t\t\t\tpageY > p2.top &&\r\n\t\t\t\t\t\tpageY < p2.top + droppable.el.outerHeight();\r\n\r\n\t\treturn cb.call(droppable.element, droppable, isContain);\r\n\t});\r\n}\r\n\r\n\r\nfunction revertElement (target, animateTo, duration, cb) {\r\n\tcb = cb || $.noop();\r\n\r\n\tif (duration > 0) {\r\n\t\ttarget.animate(animateTo, duration, cb);\r\n\t} else {\r\n\t\ttarget.css(animateTo);\r\n\t\tcb();\r\n\t}\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/draggable-class.js\n ** module id = 4\n ** module chunks = 0\n **/","var touch = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);\r\n\r\nif (touch) {\r\n\texports.start = 'touchstart';\r\n\texports.move = 'touchmove';\r\n\texports.end = 'touchend';\r\n} else {\r\n\tvar navigator = window.navigator;\r\n\tvar desktopEvents = ['mousedown', 'mousemove', 'mouseup'];\r\n\tif (navigator.pointerEnabled) desktopEvents = ['pointerdown', 'pointermove', 'pointerup'];\r\n\telse if (navigator.msPointerEnabled) desktopEvents = ['MSPointerDown', 'MSPointerMove', 'MSPointerUp'];\r\n\r\n\texports.start = desktopEvents[0];\r\n\texports.move = desktopEvents[1];\r\n\texports.end = desktopEvents[2];\r\n}\r\n\r\n\r\nexports.pointer = function (event) {\r\n\tvar result = { x: null, y: null };\r\n\r\n\tevent = event.originalEvent || event || window.event;\r\n\r\n\tevent = event.touches && event.touches.length ?\r\n\t\t\tevent.touches[0] : event.changedTouches && event.changedTouches.length ?\r\n\t\t\t\tevent.changedTouches[0] : event;\r\n\r\n\tif (event.pageX) {\r\n\t\tresult.x = event.pageX;\r\n\t\tresult.y = event.pageY;\r\n\t} else {\r\n\t\tresult.x = event.clientX;\r\n\t\tresult.y = event.clientY;\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/events.js\n ** module id = 5\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tUtils = require('./utils');\r\n\r\nvar DELEGATE_EVENT_NS = '.delegate-events-';\r\n\r\nmodule.exports = {\r\n\t// 初始化\r\n\tinit: function (element, options) {\r\n\t\tthis.initCid();\r\n\r\n\t\tthis.initOptions(options);\r\n\r\n\t\tthis.initElement(element);\r\n\r\n\t\tthis.setup();\r\n\t},\r\n\r\n\t// 初始化 ID\r\n\tinitCid: function () {\r\n\t\tthis.cid = uuid();\r\n\t},\r\n\r\n\t// 初始化 dom 对象\r\n\tinitElement: function (element) {\r\n\t\tthis.originalElement = element;\r\n\t\tthis.element = $(element)[0];\r\n\t\tif (!this.element) {\r\n\t\t\tthrow new Error('element is invalid');\r\n\t\t}\r\n\t\tthis.el = $(this.element);\r\n\t},\r\n\r\n\t// 初始化 参数\r\n\tinitOptions: function (options) {\r\n\t\tthis.originalAttrs = options;\r\n\t\tthis.attrs = $.extend({}, this.originalAttrs);\r\n\t},\r\n\r\n\t// 提供子类覆盖\r\n\tsetup: function () {},\r\n\r\n\t// 获取属性\r\n\tget: function (key) {\r\n\t\treturn this.attrs[key];\r\n\t},\r\n\r\n\t// 设置属性\r\n\tset: function (key, val) {\r\n\t\tif (key) {\r\n\t\t\tthis.attrs[key] = val;\r\n\t\t}\r\n\t},\r\n\r\n\t// 在 this.el 内寻找匹配节点\r\n\t$: function(selector) {\r\n\t\treturn this.el.find(selector);\r\n\t},\r\n\r\n\ttriggerMethod: function (name) {\r\n\t\tvar cb = this.get(name);\r\n\r\n\t\tif (isFunction(cb)) {\r\n\t\t\treturn cb.apply(this.element, Array.prototype.slice.call(arguments, 1));\r\n\t\t}\r\n\t},\r\n\r\n\t// 注册事件代理\r\n\tdelegateEvents: function(element, events, handler) {\r\n\t\tvar argus = trimRightUndefine(Array.prototype.slice.call(arguments));\r\n\r\n\t\t// delegateEvents()\r\n\t\tif (argus.length === 0) {\r\n\t\t\treturn this;\r\n\r\n\t\t// delegateEvents({\r\n\t\t//   'click p': 'fn1',\r\n\t\t//   'click li': 'fn2'\r\n\t\t// })\r\n\t\t} else if (argus.length === 1) {\r\n\t\t\tevents = element;\r\n      \t\telement = this.el;\r\n\t\t}\r\n\r\n\t\t// delegateEvents('click p', function(ev) { ... })\r\n\t\telse if (argus.length === 2) {\r\n\t\t\thandler = events;\r\n\t\t\tevents = element;\r\n\t\t\telement = this.el;\r\n\t\t}\r\n\r\n\t\t// delegateEvents(element, 'click p', function(ev) { ... })\r\n\t\telse {\r\n\t\t\telement || (element = this.el)\r\n\t\t\tthis._delegateElements || (this._delegateElements = [])\r\n\t\t\tthis._delegateElements.push($(element))\r\n\t\t}\r\n\r\n\t\t// 'click p' => {'click p': handler}\r\n\t\tif (isString(events) && isFunction(handler)) {\r\n\t\t\tvar o = {};\r\n\t\t\to[events] = handler;\r\n\t\t\tevents = o;\r\n\t\t}\r\n\r\n\t\t// key 为 'event selector'\r\n\t\tfor (var key in events) {\r\n\t\t\tif (!events.hasOwnProperty(key)) continue;\r\n\r\n\t\t\tvar args = parseEventKey(key, this);\r\n\t\t\tvar eventType = args.type;\r\n\t\t\tvar selector = args.selector;\r\n\r\n\t\t\t;(function(handler, widget) {\r\n\t\t\t\tvar callback = function(ev) {\r\n\t\t\t\t\tvar args = Array.prototype.slice.call(arguments);\r\n\r\n\t\t\t\t\tif (isFunction(handler)) {\r\n\t\t\t\t\t\treturn handler.apply(widget, args);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn widget[handler].apply(widget, args);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// delegate\r\n\t\t\t\tif (selector) {\r\n\t\t\t\t\t$(element).on(eventType, selector, callback);\r\n\t\t\t\t}\r\n\t\t\t\t// normal bind\r\n\t\t\t\t// 分开写是为了兼容 zepto，zepto 的判断不如 jquery 强劲有力\r\n\t\t\t\telse {\r\n\t\t\t\t\t$(element).on(eventType, callback);\r\n\t\t\t\t}\r\n\r\n\t\t\t})(events[key], this);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// 卸载事件代理\r\n\tunDelegateEvents: function(element, eventKey) {\r\n\t\tvar argus = trimRightUndefine(Array.prototype.slice.call(arguments));\r\n\r\n\t\tif (!eventKey) {\r\n\t\t\teventKey = element;\r\n\t\t\telement = null;\r\n\t\t}\r\n\r\n\t\t// 卸载所有\r\n\t\t// .undelegateEvents()\r\n\t\tif (argus.length === 0) {\r\n\t\t\tvar type = DELEGATE_EVENT_NS + this.cid;\r\n\r\n\t\t\tthis.el && this.el.off(type);\r\n\r\n\t\t\t// 卸载所有外部传入的 element\r\n\t\t\tif (this._delegateElements) {\r\n\t\t\t\tfor (var de in this._delegateElements) {\r\n\t\t\t\t\tif (!this._delegateElements.hasOwnProperty(de)) continue;\r\n\t\t\t\t\tthis._delegateElements[de].off(type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\tvar args = parseEventKey(eventKey, this);\r\n\r\n\t\t\t// 卸载 this.el\r\n\t\t\t// .undelegateEvents(events)\r\n\t\t\tif (!element) {\r\n\t\t\t\tthis.el && this.el.off(args.type, args.selector);\r\n\t\t\t}\r\n\r\n\t\t\t// 卸载外部 element\r\n\t\t\t// .undelegateEvents(element, events)\r\n\t\t\telse {\r\n\t\t\t\t$(element).off(args.type, args.selector);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\r\n\tdestroy: function () {\r\n\t\tthis.undelegateEvents();\r\n\r\n\t\tfor (var p in this) {\r\n\t\t\tif (this.hasOwnProperty(p)) {\r\n\t\t\t\tdelete this[p];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.destroy = function() {};\r\n\t}\r\n};\r\n\r\n// Helpers\r\n// ------\r\nvar uuid = Utils.uuid,\r\n\tisString = Utils.isString,\r\n\tisFunction = Utils.isFunction;\r\n\r\nvar EVENT_KEY_SPLITTER = /^(\\S+)\\s*(.*)$/;\r\nvar EXPRESSION_FLAG = /{{([^}]+)}}/g;\r\nvar INVALID_SELECTOR = 'INVALID_SELECTOR';\r\n\r\nfunction parseEventKey(eventKey, widget) {\r\n\tvar match = eventKey.match(EVENT_KEY_SPLITTER);\r\n\tvar eventType = match[1] + DELEGATE_EVENT_NS + widget.cid;\r\n\r\n\t// 当没有 selector 时，需要设置为 undefined，以使得 zepto 能正确转换为 bind\r\n\tvar selector = match[2] || undefined;\r\n\r\n\tif (selector && selector.indexOf('{{') > -1) {\r\n\t\tselector = parseExpressionInEventKey(selector, widget);\r\n\t}\r\n\r\n\treturn {\r\n\t\ttype: eventType,\r\n\t\tselector: selector\r\n\t};\r\n}\r\n\r\n// 解析 eventKey 中的 {{xx}}, {{yy}}\r\nfunction parseExpressionInEventKey(selector, widget) {\r\n\r\n\treturn selector.replace(EXPRESSION_FLAG, function(m, name) {\r\n\t\tvar parts = name.split('.');\r\n\t\tvar point = widget, part;\r\n\r\n\t\twhile (part = parts.shift()) {\r\n\t\t\tif (point === widget.attrs) {\r\n\t\t\t\tpoint = widget.get(part);\r\n\t\t\t} else {\r\n\t\t\t\tpoint = point[part];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 已经是 className，比如来自 dataset 的\r\n\t\tif (isString(point)) {\r\n\t\t\treturn point;\r\n\t\t}\r\n\r\n\t\t// 不能识别的，返回无效标识\r\n\t\treturn INVALID_SELECTOR;\r\n\t});\r\n}\r\n\r\n\r\nfunction trimRightUndefine(argus) {\r\n\tfor (var i = argus.length - 1; i >= 0; i--) {\r\n\t\tif (argus[i] === undefined) {\r\n\t\t\targus.pop();\r\n\t\t} else {\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn argus;\r\n}\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./utils/widget.js\n ** module id = 6\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tUtils = require('../utils/utils'),\r\n\tDroppable = require('./droppable-class');\r\n\r\n$.fn.hqyDroppable = function (options) {\r\n\tvar args = arguments;\r\n\r\n\treturn this.each(function () {\r\n\t\tvar $ele = $(this);\r\n\t\tvar instance = $ele.data('hqyDroppable');\r\n\r\n\t\tif (Utils.isString(options)){\r\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = $.extend({}, $.fn.hqyDroppable.defaults, options || {});\r\n\r\n\t\tif (instance){\r\n\t\t\tinstance.destroy();\r\n\t\t}\r\n\r\n\t\tinstance = new $.fn.hqyDroppable.clz();\r\n\t\tinstance.init(this, options);\r\n\r\n\t\t$ele.data('hqyDroppable', instance);\r\n\t});\r\n};\r\n\r\n$.fn.hqyDroppable.clz = Droppable;\r\n$.fn.hqyDroppable.instances = Droppable.instances;\r\n\r\n$.fn.hqyDroppable.defaults = {\r\n\taccept: null,\r\n\tdisabled: false,\r\n\tcursor: 'copy',\r\n\tonDragEnter: function(event, source){},\r\n\tonDragOver: function(event, source){},\r\n\tonDragLeave: function(event, source){},\r\n\tonDrop: function(event, source){}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/droppable.js\n ** module id = 7\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tWidget = require('../utils/widget');\r\n\r\nfunction Droppable () {}\r\n\r\n$.extend(Droppable.prototype, Widget, {\r\n\tsetup: function () {\r\n\t\tdelegate(this, '_dragenter', 'onDragEnter');\r\n\r\n\t\tdelegate(this, '_dragleave', 'onDragLeave');\r\n\r\n\t\tdelegate(this, '_dragover', 'onDragOver');\r\n\r\n\t\tdelegate(this, '_drop', 'onDrop');\r\n\r\n\t\tthis.el.attr('hqy-droppable-element', 'active');\r\n\r\n\t\tinstances.push(this);\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\tthis.el.removeAttr('hqy-droppable-element');\r\n\r\n\t\tfor (var i=0; i<instances.length; i++) {\r\n\t\t\tif (this === instances[i]) {\r\n\t\t\t\tinstances.splice(i--, 1);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tWidget.destroy.call(this);\r\n\t}\r\n});\r\n\r\nmodule.exports = Droppable;\r\n\r\nvar instances = Droppable.instances = [];\r\n\r\n\r\n// helpers\r\n// ----------------\r\n\r\nfunction delegate (instance, type, method) {\r\n\tinstance.delegateEvents(type, function (event, dragEvent, dragElement) {\r\n\t\tthis.triggerMethod(method, dragEvent, dragElement);\r\n\t});\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/droppable-class.js\n ** module id = 8\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tUtils = require('../utils/utils'),\r\n\tResizable = require('./resizable-class');\r\n\r\n$.fn.hqyResizable = function (options) {\r\n\tvar args = arguments;\r\n\r\n\treturn this.each(function () {\r\n\t\tvar $ele = $(this);\r\n\t\tvar instance = $ele.data('hqyResizable');\r\n\r\n\t\tif (Utils.isString(options)){\r\n\t\t\tinstance && instance[options].apply(instance, Array.prototype.slice.call(args, 1));\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = $.extend({}, $.fn.hqyResizable.defaults, options || {});\r\n\r\n\t\tif (instance){\r\n\t\t\tinstance.destroy();\r\n\t\t}\r\n\r\n\t\tinstance = new $.fn.hqyResizable.clz();\r\n\t\tinstance.init(this, options);\r\n\r\n\t\t$ele.data('hqyResizable', instance);\r\n\t});\r\n};\r\n\r\n$.fn.hqyResizable.clz = Resizable;\r\n\r\n$.fn.hqyResizable.defaults = {\r\n\tdisabled: false,\r\n\thandles:'n, e, s, w, ne, se, sw, nw, all',\r\n\tminWidth: 10,\r\n\tminHeight: 10,\r\n\tmaxWidth: 10000,\r\n\tmaxHeight: 10000,\r\n\tedge:5,\r\n\tonBeforeResize: function (e) {},\r\n\tonStartResize: function(e) {},\r\n\tonResize: function(e) {},\r\n\tonStopResize: function(e) {}\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/resizable.js\n ** module id = 9\n ** module chunks = 0\n **/","var $ = require('../$'),\r\n\tEvents = require('./events'),\r\n\tWidget = require('../utils/widget');\r\n\r\nfunction Resizable () {}\r\n\r\n$.extend(Resizable.prototype, Widget, {\r\n\tsetup: function () {\r\n\t\tthis.bindEvents();\r\n\t},\r\n\r\n\tbindEvents: function () {\r\n\t\tthis.delegateEvents('mousemove', function (event) {\r\n\t\t\tif (this.get('disabled')) return;\r\n\r\n\t\t\tvar dir = this.getDirection(Events.pointer(event));\r\n\r\n\t\t\tif (dir) {\r\n\t\t\t\tthis.el.css('cursor', dir + '-resize');\r\n\t\t\t\ttoggleInHotzone(true);\r\n\t\t\t} else {\r\n\t\t\t\tthis.el.css('cursor', '');\r\n\t\t\t\ttoggleInHotzone(false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.delegateEvents('mouseleave', function (event) {\r\n\t\t\tif (this.get('disabled')) return;\r\n\r\n\t\t\tthis.el.css('cursor', '');\r\n\t\t\ttoggleInHotzone(false);\r\n\t\t});\r\n\r\n\t\tthis.delegateEvents(Events.start, this.doResizeBefore);\r\n\r\n\t\tthis.delegateEvents('click', function (event) {\r\n\t\t\tif (!this._allowClick) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tthis._allowClick = true;\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\tgetDirection: function (pointer) {\r\n\t\tvar offset = this.el.offset(),\r\n\t\t\twidth = this.el.outerWidth(),\r\n\t\t\theight = this.el.outerHeight(),\r\n\t\t\tedge = this.get('edge'),\r\n\t\t\tpageX = pointer.x,\r\n\t\t\tpageY = pointer.y,\r\n\t\t\tdir = '';\r\n\r\n\t\tif (pageY > offset.top && pageY < offset.top + edge) {\r\n\t\t\tdir += 'n';\r\n\t\t} else if (pageY < offset.top + height && pageY > offset.top + height - edge) {\r\n\t\t\tdir += 's';\r\n\t\t}\r\n\t\tif (pageX > offset.left && pageX < offset.left + edge) {\r\n\t\t\tdir += 'w';\r\n\t\t} else if (pageX < offset.left + width && pageX > offset.left + width - edge) {\r\n\t\t\tdir += 'e';\r\n\t\t}\r\n\r\n\t\tvar handles = this.get('handles').split(',');\r\n\t\tfor(var i=0; i<handles.length; i++) {\r\n\t\t\tvar handle = handles[i].replace(/(^\\s*)|(\\s*$)/g, '');\r\n\t\t\tif (handle == 'all' || handle == dir) {\r\n\t\t\t\treturn dir;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\tdoResizeBefore: function (event) {\r\n\t\t// 重置点击事件标志位\r\n\t\tthis._allowClick = true;\r\n\r\n\t\t// 不允许缩放\r\n\t\tif (event.which === 3 || this.get('disabled') || !canResize()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar pointer = Events.pointer(event);\r\n\r\n\t\t// 获取缩放的方向\r\n\t\tvar dir = this.getDirection(pointer);\r\n\t\tif (!dir) return;\r\n\r\n\t\t// 阻止默认事件\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// 撤销 hotzone 状态\r\n\t\ttoggleInHotzone(false);\r\n\r\n\t\t// 封装缩放数据\r\n\t\tvar outerWidth = this.el.outerWidth();\r\n\t\tvar outerHeight = this.el.outerHeight();\r\n\t\tvar width = this.el.width();\r\n\t\tvar height = this.el.height();\r\n\r\n\t\tevent.data = {\r\n\t\t\tdir: dir,\r\n\t\t\tstartLeft: getCssValue(this.el, 'left'),\r\n\t\t\tstartTop: getCssValue(this.el, 'top'),\r\n\t\t\tleft: getCssValue(this.el, 'left'),\r\n\t\t\ttop: getCssValue(this.el, 'top'),\r\n\t\t\tstartX: pointer.x,\r\n\t\t\tstartY: pointer.y,\r\n\t\t\tstartWidth: outerWidth,\r\n\t\t\tstartHeight: outerHeight,\r\n\t\t\twidth: outerWidth,\r\n\t\t\theight: outerHeight,\r\n\t\t\tdeltaWidth: outerWidth - width,\r\n\t\t\tdeltaHeight: outerHeight - height\r\n\t\t};\r\n\r\n\t\tif (this.triggerMethod('onBeforeResize', event) === false) return;\r\n\r\n\t\tvar that = this,\r\n\t\t\t$doc = $(document),\r\n\t\t\tnamespace = getEventNamespace(this.cid);\r\n\r\n\t\t$doc.on(Events.move + namespace, event.data, function (event) {\r\n\t\t\tif (!isResizing()) {\r\n\t\t\t\tthat.doResizeStart(event);\r\n\t\t\t} else {\r\n\t\t\t\tthat.doResizeMove(event);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t$doc.on(Events.end + namespace, event.data, function (event) {\r\n\t\t\tthat.doResizeEnd(event);\r\n\t\t});\r\n\t},\r\n\r\n\tresize: function (event) {\r\n\t\tvar resizeData = event.data;\r\n\t\tvar dir = resizeData.dir;\r\n\t\tvar pointer = Events.pointer(event);\r\n\t\tvar pageX = pointer.x;\r\n\t\tvar pageY = pointer.y;\r\n\t\tvar width = 0;\r\n\t\tvar height = 0;\r\n\r\n\t\tif (dir.indexOf('e') != -1) {\r\n\t\t\twidth = resizeData.startWidth + pageX - resizeData.startX;\r\n\t\t\twidth = Math.min(\r\n\t\t\t\t\t\tMath.max(width, this.get('minWidth')),\r\n\t\t\t\t\t\tthis.get('maxWidth')\r\n\t\t\t\t\t);\r\n\t\t\tresizeData.width = width;\r\n\t\t}\r\n\t\tif (dir.indexOf('s') != -1) {\r\n\t\t\theight = resizeData.startHeight + pageY - resizeData.startY;\r\n\t\t\theight = Math.min(\r\n\t\t\t\t\tMath.max(height, this.get('minHeight')),\r\n\t\t\t\t\tthis.get('maxHeight')\r\n\t\t\t);\r\n\t\t\tresizeData.height = height;\r\n\t\t}\r\n\t\tif (dir.indexOf('w') != -1) {\r\n\t\t\twidth = resizeData.startWidth - pageX + resizeData.startX;\r\n\t\t\twidth = Math.min(\r\n\t\t\t\t\t\tMath.max(width, this.get('minWidth')),\r\n\t\t\t\t\t\tthis.get('maxWidth')\r\n\t\t\t\t\t);\r\n\t\t\tresizeData.width = width;\r\n\t\t\tresizeData.left = resizeData.startLeft + resizeData.startWidth - resizeData.width;\r\n\t\t}\r\n\t\tif (dir.indexOf('n') != -1) {\r\n\t\t\theight = resizeData.startHeight - pageY + resizeData.startY;\r\n\t\t\theight = Math.min(\r\n\t\t\t\t\t\tMath.max(height, this.get('minHeight')),\r\n\t\t\t\t\t\tthis.get('maxHeight')\r\n\t\t\t\t\t);\r\n\t\t\tresizeData.height = height;\r\n\t\t\tresizeData.top = resizeData.startTop + resizeData.startHeight - resizeData.height;\r\n\t\t}\r\n\t},\r\n\r\n\tapplySize: function (event) {\r\n\t\tvar resizeData = event.data;\r\n\r\n\t\tthis.el.css({\r\n\t\t\tleft: resizeData.left,\r\n\t\t\ttop: resizeData.top\r\n\t\t});\r\n\r\n\t\tif (this.el.outerWidth() != resizeData.width) {\r\n\t\t\tthis.el.width(resizeData.width - resizeData.deltaWidth);\r\n\t\t}\r\n\r\n\t\tif (this.el.outerHeight() != resizeData.height) {\r\n\t\t\tthis.el.height(resizeData.height - resizeData.deltaHeight);\r\n\t\t}\r\n\t},\r\n\r\n\tdoResizeStart: function (event) {\r\n\t\tif (!this._isMoving) {\r\n\t\t\t// 阻止默认事件\r\n\t\t\tevent.preventDefault();\r\n\r\n\t\t\tthis._isMoving = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 设置状态\r\n\t\ttoggleResizing(true);\r\n\r\n\t\t$('body').css('cursor', event.data.dir+'-resize');\r\n\r\n\t\t// 触发回调\r\n\t\tthis.triggerMethod('onStartDrag', event);\r\n\r\n\t\t// 设置一次缩放\r\n\t\tthis.doResizeMove(event);\r\n\t},\r\n\r\n\tdoResizeMove: function (event) {\r\n\t\tif (!isResizing()) return;\r\n\r\n\t\t// 阻止默认事件\r\n\t\tevent.preventDefault();\r\n\r\n\t\t// 处理缩放数据\r\n\t\tthis.resize(event);\r\n\r\n\t\t// 处理缩放数据\r\n\t\tif (this.triggerMethod('onResize', event) !== false) {\r\n\t\t\tthis.applySize(event);\r\n\t\t}\r\n\t},\r\n\r\n\tdoResizeEnd: function (event) {\r\n\t\tif (!isResizing()) {\r\n\t\t\tthis.clearResizing();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// 重置一次缩放\r\n\t\tthis.doResizeMove(event);\r\n\r\n\t\t// 设置点击事件标志位\r\n\t\tthis._allowClick = false;\r\n\r\n\t\t// 触发回调\r\n\t\tthis.triggerMethod('onStopResize', event);\r\n\r\n\t\tthis.clearResizing();\r\n\r\n\t\t$('body').css('cursor','');\r\n\t},\r\n\r\n\tclearResizing: function () {\r\n\t\tthis._isMoving = false;\r\n\r\n\t\t$(document).off(getEventNamespace(this.cid));\r\n\r\n\t\tsetTimeout(function(){\r\n\t\t\t$('body').css('cursor','');\r\n\t\t},100);\r\n\r\n\t\ttoggleResizing(false);\r\n\t\ttoggleInHotzone(false);\r\n\t},\r\n\r\n\tdestroy: function () {\r\n\t\t// 清除缩放事件产生的临时变量\r\n\t\tthis.clearResizing();\r\n\t\tWidget.destroy.call(this);\r\n\t}\r\n});\r\n\r\nmodule.exports = Resizable;\r\n\r\n// helpers\r\n// ----------------\r\n\r\nfunction getEventNamespace (cid) {\r\n\treturn '.hqyResizable' + cid;\r\n}\r\n\r\nfunction canResize () {\r\n\tif ($.fn.hqyResizable.isResizing) return false;\r\n\r\n\tif ($.fn.hqyDraggable && $.fn.hqyDraggable.isDragging) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\treturn true;\r\n}\r\n\r\nfunction toggleResizing (state) {\r\n\t$.fn.hqyResizable.isResizing = state;\r\n}\r\n\r\nfunction toggleInHotzone (state) {\r\n\t$.fn.hqyResizable.inHotzone = state;\r\n}\r\n\r\nfunction isResizing () {\r\n\treturn $.fn.hqyResizable.isResizing;\r\n}\r\n\r\nfunction getCssValue(el, css) {\r\n\tvar val = parseInt(el.css(css));\r\n\tif (isNaN(val)) {\r\n\t\treturn 0;\r\n\t} else {\r\n\t\treturn val;\r\n\t}\r\n}\r\n\r\n\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./interaction/resizable-class.js\n ** module id = 10\n ** module chunks = 0\n **/"],"sourceRoot":""}